@{
    ViewData["Title"] = "Dashboard";

    //Get Lists to Display on Front-End
    List<Student> students = ViewBag.Students;
    List<School> schools = ViewBag.Schools;
    List<Teacher> teachers = ViewBag.Teachers;
    List<Lecturer> lecturers = ViewBag.Lecturers;
    List<Grading> gradings = ViewBag.Gradings;
    List<Campus> campuses = ViewBag.Campuses;


    //var FilterAction = Accessor.HttpContext.Request.Query["filterAction"];
    //int filterAction = int.Parse(FilterAction);

    //var FilterCriteria = Accessor.HttpContext.Request.Query["criteria"];
    //string criteria = FilterCriteria;


}

<div id="Tea_Dash">
    <label class="h1">Dashboard</label>
    <br />
    <label class="h5">Welcome</label>
    <hr />
    <label class="h2">Varsity College Students</label>
    <form method="post" asp-action="Dashboard">
        <div style="float: right; width: 40%;" class="input-group mb-3">
            <select id="studentFilter" name="SearchOption" class="form-select" style="max-width: 40% !important">
                <option value="1">Student Number</option>
                <option value="2">Name & Surname</option>
                <option value="3">Qualification</option>
                <option value="4">Year of Study</option>
                <option value="5">Campus</option>
            </select>
            <input type="text" name="SearchType" value="students" hidden />
            <input type="text" id="criteria" name="Search" class="form-control" placeholder="Search..." aria-label="Recipient's username" aria-describedby="button-addon2">
            <button class="btn btn-primary" type="submit" id="button-addon2"> <i class="bi bi-search"></i> Search</button>
        </div>
    </form>
    <div id="DivStudents">
        <div id="StudentsTop">
            <table>
                <thead>
                    <tr>
                        <th>
                            Student Number
                        </th>
                        <th>
                            Name & Surname
                        </th>
                        <th>
                            Qualification
                        </th>
                        <th>
                            Year of Study
                        </th>
                        <th>
                            Campus
                        </th>
                        <th>
                            Details
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
        <div id="StudentsBot">
            <table>
                <tbody>
                    @foreach (var item in students)
                    {
                        <tr>
                            <td>
                                @item.Number
                            </td>
                            <td>
                                @item.FirstName @item.LastName
                            </td>
                            <td>
                                @item.Qualification
                            </td>
                            <td>
                                @item.YearOfStudy
                            </td>
                            <td>
                                @item.CampusNavigation.Name
                            </td>
                            <td>
                                <a asp-action="Details" asp-controller="Students" asp-route-id="@item.Number" class="btn btn-success">
                                    <i class="bi bi-info-circle"></i> Details
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <br />
    <hr />
    <label class="h2">Recent Gradings</label>
    <div style="float: right; width: 40%;" class="input-group mb-3">
        <select class="form-select" style="max-width: 40% !important">
            <option value="">Date</option>
            <option value="">Student</option>
            <option value="">Teacher</option>
            <option value="">Year of Study</option>
            <option value="">Subject</option>
        </select>
        <input type="text" class="form-control" placeholder="Search..." aria-label="Recipient's username" aria-describedby="button-addon2">
        <button class="btn btn-primary" type="button" id="button-addon2"> <i class="bi bi-search"></i> Search</button>
    </div>
    <div id="DivGradings">
        <div id="GradingsTop">
            <table>
                <thead>
                    <tr>
                        <th>
                            Date
                        </th>
                        <th>
                            Student
                        </th>
                        <th>
                            Teacher
                        </th>
                        <th>
                            Year of Study
                        </th>
                        <th>
                            Subject
                        </th>
                        <th>
                            Details
                        </th>
                    </tr>
                </thead>
            </table>
        </div>
        <div id="GradingsBot">
            <table>
                <tbody>

                    @foreach (var item in gradings)
                    {
                        Teacher t = teachers.Where(x => x.Number == item.Teacher).SingleOrDefault();
                        string t_name = t.FirstName.Substring(0, 1) + ". " + t.LastName;
                        <tr>
                            <td>
                                @item.Date.ToShortDateString()
                            </td>
                            <td>
                                @item.Student
                            </td>
                            <td>
                                @t_name
                            </td>
                            <td>
                                @item.YearOfStudy
                            </td>
                            <td>
                                @item.Subject
                            </td>
                            <td>
                                <a asp-action="Details" asp-controller="Gradings" asp-route-id="@item.Number" class="btn btn-success">
                                    <i class="bi bi-info-circle"></i> Details
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <br />
    <br />
</div>

@*<script>
    function getStudentFilterResult() {
        var e = document.getElementById("studentFilter");
        var value1 = e.value;

        var f = document.getElementById("criteria");
        var value2 = f.value;

        currentUrl = window.location.href.split('?')[0];
        newUrl = currentUrl + "?filterAction=" + value1 + "&criteria=" + value2;
        window.location.href = newUrl;
    }
</script>*@

<style>
    #nav_Dashboard {
        color: #495057;
        background-color: #fff;
        border-color: #dee2e6 #dee2e6 #fff;
    }

    main {
        width: 100% !important;
        background-color: white;
        padding: 3%;
    }

    main {
        box-shadow: 0px 0px 15px 5px rgba(0, 0, 0, 0.1);
    }

    #Tea_Dash {
        width: 100%;
    }

    #DivStudents {
        width: 100%;
    }

    #StudentsTop {
        width: 100%;
    }

        #StudentsTop table {
            width: 100%;
        }

            #StudentsTop table tr {
                background-color: #084E62;
            }

            #StudentsTop table th {
                width: 16%;
                padding: 1%;
                color: white;
            }

    #StudentsBot {
        width: 100%;
    }

        #StudentsBot table {
            width: 100%;
        }

            #StudentsBot table tr:nth-child(even) {
                background-color: #f2f2f2;
            }

            #StudentsBot table tr:nth-child(odd) {
                background-color: #E9E9E9;
            }

            #StudentsBot table td {
                width: 16%;
                padding: 1%;
                color: black;
            }

    #GradingsTop {
        width: 100%;
    }

        #GradingsTop table {
            width: 100%;
        }

            #GradingsTop table tr {
                background-color: #084E62;
            }

            #GradingsTop table th {
                width: 16%;
                padding: 1%;
                color: white;
            }

    #GradingsBot {
        width: 100%;
    }

        #GradingsBot table {
            width: 100%;
        }

            #GradingsBot table tr:nth-child(even) {
                background-color: #f2f2f2;
            }

            #GradingsBot table tr:nth-child(odd) {
                background-color: #E9E9E9;
            }

            #GradingsBot table td {
                width: 16%;
                padding: 1%;
                color: black;
            }
</style>